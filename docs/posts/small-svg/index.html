<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The smallest SVG possible</title>
    <meta name="description" content="How to optimise SVG by (assisted) hand">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Andy Fitzsimon">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Andy Fitzsimon">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='.5 .5 3 4' fill='none' stroke='lightseagreen' stroke-linecap='round'%3E%3Cpath d='M1 4h-.001V1h2v.001M1 2.6h1v.001' /%3E%3C/svg%3E">
    <meta name="theme-color" content="#3DBABA" >
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;500;800&display=swap" rel="stylesheet"> 
  </head>
  <body>
  


<nav>
  <a class="home" href="/" aria-label="home">
    <svg viewBox=".5 .5 3 4.1" fill="none"  preserveAspectRatio="xMinYMin meet" stroke="currentColor" stroke-width="1.1" stroke-opacity="1" stroke-linecap="round">
    <path d="M1 4H.999V1 M1 1 V.9959h2v.001 M1 2.6v.001h1v.001"/>
    </svg>
  </a>
        <a  class="" href="/posts/">Posts</a>
        <a  class="" href="/resume/">Resume</a>
        <a  class="" href="/story/">Story</a>
      </nav>
    </header>
    <main class="article">
      <article>
<header>
    <h1>The smallest SVG possible</h1>
    <time datetime="2021-04-11">11 Apr 2021</time><a href="/tags/svg/" class="tag">svg</a><a href="/tags/minimal/" class="tag">minimal</a><a href="/tags/tips/" class="tag">tips</a>

</header>
<p>How would you make my site favicon from a bitmap into an SVG? <em>(don’t cheat with web inspector)</em></p>
<p><svg  viewBox=".5 .5 3 4" fill="none" stroke="lightseagreen" stroke-linecap="round" style="width:100%; height:10em; background-color: var(--bg-2)"><path d="M1 4h-.001V1h2v.001M1 2.6h1v.001"/></svg></p>
<p>The lazy me would just software trace using my favourite illustration tool. (<a href="https://inkscape.org">Inkscape</a>)<br>
<img src="/img/small-svg/f.webp" alt="inkscape with an autotraced shape" /></p>
<p>But yuck, look at those node coordinates, and the shape is kind of melted when you look up close.</p>
<p>In better news, the resulting filesize is an affordable <strong>2kb</strong>, much smaller than a decent resolution png or jpeg – but files over two thousand bytes are rookie numbers!<br>
We're a long way from optimal SVG sizes.</p>
<p>So maybe we should roll up our sleeves and manually redraw it with the pen tool — being careful about where to place nodes, and when to use straight lines vs beziers.</p>
<img src="/img/small-svg/f-manual.png" alt="manually placed cubic beziers"  />
<p>Woohoo we're now at <strong>800 bytes</strong> - less than half the original size.</p>
<p>At this point, I'd urge you to go one step further and optimise with <a href="https://github.com/svg/svgo">SVGO</a> or manually with <a href="https://jakearchibald.github.io/svgomg/">SVGOMG</a> — being sure not to melt the shape with precision settings.</p>
<img src="/img/small-svg/f-omg.png" alt="SVGO optimising an SVG file" />
<p>Wow, that worked great — We're now at around <strong>236 bytes</strong> which is excellent.  The shape is even closer to the original than tracing. This is usually as good as it gets, an 88% reduction from automatic tracing. IMO this was worth the effort.</p>
<h2 id="what-if-we-went-deeper%3F">What if we went deeper? <a class="direct-link" href="#what-if-we-went-deeper%3F">#</a></h2>
<p>I managed to get the image down to <strong>127 bytes</strong>, 46% smaller than our best 236 byte image. All with full-fidelity by using a <code>stroke-linecap:round</code> hack.<br>
Here's the full SVG:</p>
<pre class="language-svg"><code class="language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <br><span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.5 .5 3 4<span class="token punctuation">"</span></span> <br><span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span> <br><span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#20b2a<span class="token punctuation">"</span></span> <br><span class="token attr-name">stroke-linecap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>round<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br>M1 4h-.001<br>V1h2v.001<br>M1 2.6<br>h1v.001<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code></pre>
<p>First I stroke the lines so I save on doubling coordnates, then I exploit the <code>v</code>and <code>h</code> relative operators at tiny offsets.</p>
<p>See the values with <code>h.001</code> and <code>v.001</code> and <code>h-.001</code>  ?<br>
That's how I hacked the directional rounded corners.</p>
<p>Normally <code>stroke-linecap:round</code> is just round. Nothing you can do about it.<br>
But when you change direction <em>REALLY</em> close to the edge coordinate, the cusp squares off on one side only, and you can control which side with negative or positive relative values.</p>
<p>Neat huh? We're just getting started...</p>
<h1 id="the-outfit-logo">The Outfit logo <a class="direct-link" href="#the-outfit-logo">#</a></h1>
<p>A while back, I created this interactive demo of the Outfit logo to teach some of the fundamentals of plotting and styling SVG path coordinates.  There's no fill here.</p>
<p class="codepen" data-height="470" data-theme-id="1777" data-default-tab="result" data-user="andyfitz" data-slug-hash="gOwzMwV" style="height:470px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; margin: 1em 0; padding: 1em;" data-pen-title="Outfit Logo Inspector"> <span>See the Pen <a href="https://codepen.io/andyfitz/pen/gOwzMwV">  Outfit Logo Inspector</a> by Andy Fitzsimon (<a href="https://codepen.io/andyfitz">@andyfitz</a>)   on <a href="https://codepen.io">CodePen</a>.</span></p><script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script><style>@media(max-width:70em){.cp_embed_wrapper iframe{height: 46em !important;}}</style>
<h2 id="history-of-the-mark">History of the mark <a class="direct-link" href="#history-of-the-mark">#</a></h2>
<p><a target="_blank" href="https://rowanhogan.com/" rel="noreferrer">Rowan Hogan</a> originally designed the Outfit logo. No doubt without regard specifically for SVG format optimisation. Don’t let the medium become the message as they say.</p>
<p>The design evolved with minor optical updates and when it came time to make this demo, it had optimisation amenities stacked against it:</p>
<ul>
<li>An optical overshoot (round coords non-exact to a grid)</li>
<li>Non-perfect curves (the f and the u are bent differently)</li>
<li>Non 1:1 grid rhythm (1:1.3 spacing of stems)</li>
</ul>
<p>Thankfully the solution above is full-fidelity to the intended mark.</p>
<p>It got even smaller as a one-liner:  <strong>253 bytes</strong>, styled and uncompressed (not bad for so many letters)</p>
<pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 19 8.5<span class="token punctuation">"</span></span> <br><span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#e40046<span class="token punctuation">"</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2.36<span class="token punctuation">"</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>6.12<span class="token punctuation">"</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1.68<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M5.35 4<br>v2.5A1.02 1 0 008 6.5v-2h10.68<br>M10.2 8.2v-6<br>m2.3 6V2a1.3 1.2 10 012-1<br>m.3 7.2V4.5<br>m2.3 3.7v-6<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M14.8 2.8v0<span class="token punctuation">"</span></span><br><span class="token attr-name">stroke-linecap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>round<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code></pre>
<h1 id="rules-to-svg-by">Rules to SVG by <a class="direct-link" href="#rules-to-svg-by">#</a></h1>
<p>This list is by no means comperehensive but it does serve as a rough guide</p>
<h2 id="small-artboards">Small Artboards <a class="direct-link" href="#small-artboards">#</a></h2>
<p>Ensure coodinate precision by keeping your <code>viewBox</code> under 10 or 100 - from zero</p>
<pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 10 10<span class="token punctuation">"</span></span> <span class="token attr-name">...</span> <span class="token punctuation">></span></span>   </code></pre>
<p>It makes sense to factor up by 10 for more intricate shapes.</p>
<pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 100 100<span class="token punctuation">"</span></span> <span class="token attr-name">...</span> <span class="token punctuation">></span></span>   <br></code></pre>
<p>Both scales work depending on the complexity of your image. The point here is we dont want every coordinate to be in the thousands, we also want to avoid unnessecary decimal coordinates. Every byte counts.<br>
If every coordinate has a decimal place, go up by 10. If only a few do, try to round up.</p>
<h2 id="stroke-if-you-can">Stroke if you can <a class="direct-link" href="#stroke-if-you-can">#</a></h2>
<p>Every shape you can pull off as a stroke that would otherwise be a filled path saves you 2-3x bloat in coordinate. This is fairly easy to visualise as a stroke only has an inner line that can be expanded wheras a filled shape has two outer lines to create a zone.</p>
<p>When you combine the right sized <code>viewBox</code> and stroked path, you wont even have to set <code>stroke-width</code> as it defaults to 1 viewBox unit.</p>
<h2 id="know-when-to-capital-or-lowercase-path-coordinates">Know when to capital or lowercase path coordinates <a class="direct-link" href="#know-when-to-capital-or-lowercase-path-coordinates">#</a></h2>
<p>Don't know the difference?<br>
Uppercase Letters like <code>M</code> <code>C</code> <code>L</code>  <code>A</code> <code>H</code> <code>V</code> <code>Q</code> <code>T</code> etc all start an operation relative to the viewBox<br>
Lowercase letters (same as above) <code>m</code> <code>c</code> <code>l</code> <code>a</code> <code>h</code> <code>v</code> <code>q</code> <code>t</code> etc start from the last coordinate you did</p>
<p>Relative or absolute positioned coordinates make a huge difference. Sometimes optimisation tools like SVGO can select which one is best, but not always.</p>
<h2 id="chose-your-operator-wisely">Chose your operator wisely <a class="direct-link" href="#chose-your-operator-wisely">#</a></h2>
<p>Using a horizontal <code>H</code> or vertical <code>V</code> operator is great because you only need one coodinate it saves you tryping both X and Y,  you only need one coordinate so that halves what would otherwise be redundant axis data with the line-to <code>L</code> operator.</p>
<p>Arc paths, quadratics and cubic splines all have their own benefits and problems.</p>
<h2 id="dirty-path-tricks">Dirty Path Tricks <a class="direct-link" href="#dirty-path-tricks">#</a></h2>
<h3 id="circle-with-single-arc-operators">Circle with single arc operators <a class="direct-link" href="#circle-with-single-arc-operators">#</a></h3>
<p>You can draw 'pretty much' a perfect circle with a single SVG path arc operator.</p>
<p>If you're already working in a <code>path d=&quot;&quot; </code> element, there's no need for a new element.<br>
This saves you 10 bytes per circle in that context. So we can do:</p>
<pre class="language-xml"><code class="language-xml">M5 0a5 5 0 10.001 0</code></pre>
<p>vs having to go create a new element which could get messy for your CSS</p>
<pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span> </code></pre>
<h3 id="dots-with-stroke-linecap%3D%22round%22">Dots with stroke-linecap=&quot;round&quot; <a class="direct-link" href="#dots-with-stroke-linecap%3D%22round%22">#</a></h3>
<p>if you're doing a line icon with linecap-round you can make a dot the exact width of your stroke just by doing a very short relative horizontal or vertical line</p>
<pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M 5 5 h.001<span class="token punctuation">"</span></span> <span class="token attr-name">stroke-linecap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>round<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>

</article>

<svg viewBox="0 0 50 30" style=" width:9em; height:4em; display:block; margin: 2em auto"  class="sig"><path fill="none" stroke="var(--neutral)" stroke-linecap="round" stroke-linejoin="round" d="m4 13q23 0 39-3m-42 12q2 0 6-7q7-13 11-13c3 0-13 28-6 20c14-14 17-25 11-17s-5 19-7 21s-6 2-2-2l10-9s-5 11-1 7l13-17c-24 31-2 9 2 9s-3 4-5 6s2-1 3 0s-6 4-6 7s11-9 19-9"/></svg>

<div class="docnav">  <a href="/posts/essential-svg-tools/" class="next"> Essential SVG tools</a> 
</div>


    </main>

    <footer>
<section class="scroll">


 


<a aria-label="Mastodon" rel="me" arget="_blank" href="https://noosa.social/@andy">
  <svg viewbox="0 0 10 10"><path  d="M3 6.5C7 6.5 9 7 9 4 9 1 8 .5 5 .5 2 .5 1 1 1 4c0 3 0 4 5 4M7 5C7 3 7 2 6 2 5 2 5 2.5 5 4.5 5 2.5 5 2 4 2 3 2 3 3 3 5" /></svg>

  <b>Mastodon</b>
  
</a>
<a aria-label="Twitter" href="https://www.twitter.com/andyfitz/" target="_blank" rel="noreferrer">
  <svg viewbox="0 0 10 10"><path  d="M9.5 2.7h-.9l.7-1.1-.9.4A.4.4 90 005 3.5 4.9 4.9 0 011 2q0 2 1.4 2.3h-1Q2 5.6 3 5.6H2Q2 6 3.5 7H1a4.5 4.5 0 007.6-3.6z" /></svg>
  <b>Twitter</b>
</a>

<a aria-label="Instagram" href="https://www.instagram.com/andyfitz" target="_blank" rel="noreferrer">
  <svg viewbox="0 0 10 10"><path d="M5 1c4 0 4 0 4 4s0 4-4 4-4 0-4-4 0-4 4-4zM3 5a1 1 0 004 0 1 1 0 00-4 0m4.5-2.5h.001" /></svg>
  <b>Instagram</b>
</a>

<a aria-label="LinkedIn" href="https://www.linkedin.com/in/andyfitz/" target="_blank" rel="noreferrer">
  <svg viewbox="0 0 10 10" stroke-width="1.6"><path stroke-linecap="butt" fill="none" d="M2 3.3V8m2.5-4.7V8m0-2.4C4.8 3.9 8.2 3 8.2 6v2" /><path stroke-width="1.9" d="M2 2h.01" /></svg>
  <b>LinkedIn</b>
</a>


<a aria-label="Github" href="https://github.com/andyfitz/" target="_blank" rel="noreferrer">
  <svg viewbox="0 0 10 10"> <path d="M1 6.6C2.2 6.6 2.3 8 3.5 8q-.2-1 .1-1.6C1.2 5.6 2 3.4 2.3 3V1.5l1 .9q1.2-.8 2.4-.1L7 1.7V3a2.3 2.3 0 01-1 3.5q.6 1 0 2.3" /></svg>
  <b>Github</b>
</a>

<a aria-label="Codepen" href="https://codepen.io/andyfitz/" target="_blank" rel="noreferrer">
  <svg viewbox="0 0 10 10"><path d="M1 6.5v-3l4-3 4 3v3l-4 3zm8-3l-4 3-4-3m0 3l4-3 4 3m-4-6v3m0 3v3" /></svg>
  <b>Codepen</b>
</a>



</section>

 Andy Fitzsimon 

 <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noreferrer">CC-BY-SA</a>

<a href="http://andyfitz.github.io/feed/feed.xml" target="_blank" rel="noreferrer">
<svg viewbox="0 0 10 10" ><path stroke-width="1.1" d="M1.5 2Q8 2 8 8M1.5 4.5Q5 4.5 5 8M2 8a.5.5 0 11.01 0z" /> </svg>
Feed
</a>
 </footer>


<style>footer svg{fill:none; fill-opacity:.2; stroke:currentcolor; stroke-linecap:round; width:2em; height:2em;}}</style>


    <!-- Current page: /posts/small-svg/ -->
  </body>
</html>
